package stepDefiniton;

import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;

import io.cucumber.java.en.And;
import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import io.github.bonigarcia.wdm.WebDriverManager;

public class FirstTestCase {
	
	WebDriver driver;
	
	@Given("^user launch firefox browser$")
    public void user_launch_firefox_browser() throws Throwable {
        WebDriverManager.firefoxdriver().setup();
        driver=new FirefoxDriver();
    }

    @Given("^when user enter (.+) and (.+)$")
    public void when_user_enter_and(String xpath, String value) throws Throwable {
        driver.findElement(By.xpath(xpath)).sendKeys(value);
        
        WebElement ele = driver.findElement(By.xpath("//select[@formcontrolname='role']"));
        Select s= new Select(ele);
        s.selectByValue("Seller");
    }

    @Then("^check wheather the otp page is displayed$")
    public void check_wheather_the_otp_page_is_displayed() throws Throwable {
        String ele = driver.getCurrentUrl();
        if(ele.contains("otp-verification"))
        {
        	System.out.println(true);
        }
        else
        {
        	System.out.println(false);
        }
    }

    @And("^goes to landing page$")
    public void goes_to_landing_page() throws Throwable {
        driver.navigate().to("https://landingpage-stage.ofofo.io/#/landingpage");
        
        driver.findElement(By.xpath("//p[text()='Join']")).click();
        Thread.sleep(3000);
    }

    @SuppressWarnings("unused")
	@And("^click on register$")
    public void click_on_register() throws Throwable {
        WebElement wait= new WebDriverWait(driver,Duration.ofHours(1)).until(
        		ExpectedConditions.elementToBeClickable(By.xpath("//button[text()=' Register ']")));
        
        driver.findElement(By.xpath("//button[text()=' Register ']")).click();
        Thread.sleep(5000);
    }

}
